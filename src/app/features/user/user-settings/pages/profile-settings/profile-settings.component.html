<div class="d-flex flex-column">
	<form [formGroup]="form" class="bordered" (ngSubmit)="updateUser()">
		<div class="banner-container w-100">
			<app-drag-and-drop-image-input
				(image)="updateBanner($event)"
				[backgroundImage]="backgroundBanner"
				[isBanner]="true"
				[initImageSrc]="user?.banner"></app-drag-and-drop-image-input>
			<div class="avatar-container">
				<app-drag-and-drop-image-input
					(image)="updateAvatar($event)"
					[backgroundImage]="backgroundAvatar"
					[initImageSrc]="user?.avatar"></app-drag-and-drop-image-input>
			</div>
		</div>
		<div
			class="form-container d-flex flex-column align-items-center w-100 h-100">
			<div class="d-flex flex-lg-row flex-column row-content">
				<div class="d-flex flex-column w-100">
					<app-input
						label="Nazwa użytkownika"
						[control]="this.form.controls['nickname']"
						[showRequiredMarker]="true"
						[errors]="[
							{ name: 'required', message: 'Nazwa użytkownika jest wymagana.' },
							{
								name: 'minlength',
								message: 'Nazwa użytkownika musi mieć min. 3 znaki.'
							},
							{
								name: 'maxlength',
								message: 'Nazwa użytkownika może mieć max. 30 znaków.'
							},
							{
								name: 'nicknameExists',
								message: 'Nazwa użytkownika jest już zajęta.'
							}
						]">
					</app-input>
				</div>
				<div class="d-flex flex-column w-100">
					<app-input
						label="Link do profilu Sematic Schoolar"
						[control]="this.form.controls['semanticScholarProfile']"
						[errors]="[
							{
								name: 'pattern',
								message: 'Błędny format linku do profilu Sematic Schoolar'
							}
						]">
					</app-input>
				</div>
			</div>

			<div class="d-flex flex-lg-row flex-column row-content">
				<div class="d-flex flex-column w-100">
					<app-input
						label="Imię"
						[control]="this.form.controls['firstName']"
						[errors]="[
							{
								name: 'maxlength',
								message:
									'Sprawdzaliśmy w bazie imion polskich i nie znaleźliśmy dłuższych niż 35 znaków. Jeśli jednak masz dłuższe imie - daj nam o tym znać :)'
							}
						]">
					</app-input>
				</div>
				<div class="d-flex flex-column w-100">
					<app-input
						label="Nazwisko"
						[control]="this.form.controls['lastName']"
						[errors]="[
							{
								name: 'maxlength',
								message:
									'Sprawdzaliśmy w bazie nazwisk polskich i nie znaleźliśmy dłuższych niż 35 znaków. Jeśli jednak masz dłuższe imie - daj nam o tym znać :)'
							}
						]">
					</app-input>
				</div>
			</div>

			<div
				class="d-flex flex-lg-row flex-column justify-content-center row-content">
				<div class="d-flex flex-column w-100">
					<app-input
						label="Miasto"
						[control]="this.form.controls['city']"
						[errors]="[
							{
								name: 'maxlength',
								message:
									'Za długa nazwa miasta. Najdłuższa miejscowość jaką znamy to Taumatawhakatangihangakoauauotamateapokaiwhenuakitanatahu w Nowej Zelandii (57 znaków).'
							}
						]">
					</app-input>
				</div>
				<div class="d-flex flex-column w-100">
					<app-input
						label="Numer telefonu"
						[control]="this.form.controls['phoneNumber']"
						[errors]="[
							{
								name: 'maxlength',
								message: 'Maksymalna długość numeru telefonu 22 znaki.'
							}
						]">
					</app-input>
				</div>
			</div>

			<div class="d-flex flex-lg-row flex-column row-content mb-3">
				<div class="d-flex flex-column last-row-container">
					<app-date-picker
						type="date"
						label="Data urodzenia"
						[control]="this.form.controls['birthdate']"
						[disableFutureDates]="true"
						[errors]="[
							{
								name: 'before',
								message: 'Nie możliwe byś urodził się w przyszłości.'
							}
						]">
					</app-date-picker>
				</div>
			</div>
			<div class="row-content mb-4">
				<div
					class="d-flex register-input textarea-container"
					[ngClass]="{
						'border-validation':
							!this.form.get('aboutText')?.valid &&
							this.form.get('aboutText')?.touched
					}">
					<app-textarea
						label="O mnie"
						[control]="this.form.controls['aboutText']"
						[errors]="[
							{
								name: 'maxlength',
								message: 'Maksymalna długość numeru telefonu 22 znaki.'
							}
						]">
					</app-textarea>

					<!-- <textarea
						type="text"
						class="standard-input textarea-input px-3 py-2"
						[id]="'aboutText'"
						formControlName="aboutText"></textarea>
					<label
						class="register-label position-absolute"
						[for]="'lastName'"
						style="padding-left: 1px"
						[ngClass]="{
							'element-has-text':
								this.form.get('aboutText')?.value !== '' &&
								this.form.get('aboutText')?.value !== null
						}"
						>O mnie...</label
					> -->
				</div>
			</div>
			<div class="row-content mb-sm-4 mb-3">
				<button type="submit" class="submit-button border-0 px-4 py-2">
					Zapisz zmiany
				</button>
			</div>
		</div>
	</form>
</div>
